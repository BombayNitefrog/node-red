# Get averages of sensor data
[{"id":"2ad773d5.31ee7c","type":"mqtt in","z":"d404d6b5.5c436","name":"","topic":"test/#","qos":"2","datatype":"json","broker":"b700a1d5.e877","x":230,"y":200,"wires":[["37b1b765.f7c4e"]]},{"id":"37b1b765.f7c4e","type":"join","z":"d404d6b5.5c436","name":"","mode":"custom","build":"object","property":"payload","propertyType":"msg","key":"topic","joiner":"\\n","joinerType":"str","accumulate":false,"timeout":"2","count":"","reduceRight":false,"reduceExp":"","reduceInit":"","reduceInitType":"","reduceFixup":"","x":370,"y":200,"wires":[["d8e10d1f.8c6da"]]},{"id":"d8e10d1f.8c6da","type":"change","z":"d404d6b5.5c436","name":"","rules":[{"t":"set","p":"payload.averageTemperature","pt":"msg","to":"$average(msg.payload.*.temperature)","tot":"jsonata"},{"t":"set","p":"payload.averageCo2","pt":"msg","to":"$average(msg.payload.*.co2)","tot":"jsonata"},{"t":"set","p":"payload.averageHumidity","pt":"msg","to":"$average(msg.payload.*.humidity)","tot":"jsonata"},{"t":"set","p":"payload.averageBattery","pt":"msg","to":"$average(msg.payload.*.battery)","tot":"jsonata"}],"action":"","property":"","from":"","to":"","reg":false,"x":540,"y":200,"wires":[[]]},{"id":"57f963d6.d7629c","type":"comment","z":"d404d6b5.5c436","name":"average sensor values","info":"","x":270,"y":140,"wires":[]},{"id":"b700a1d5.e877","type":"mqtt-broker","name":"","broker":"test.ka9n.dk","port":"1883","clientid":"","usetls":false,"compatmode":false,"keepalive":"60","cleansession":true,"birthTopic":"","birthQos":"0","birthPayload":"","closeTopic":"","closeQos":"0","closePayload":"","willTopic":"","willQos":"0","willPayload":""}]

